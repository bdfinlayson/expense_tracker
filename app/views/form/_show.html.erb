<%= form_for model do |f| %>
  <% if model.respond_to? :amount %>
    <%= f.label :amount %>
    <%= f.text_field :amount, type: :number, step: '0.01', placeholder: '$1.50' %>
  <% end %>

  <% if model.respond_to? :created_at %>
    <%= f.date_field :created_at, class: 'created_at' %>
  <% end %>

  <% if model.respond_to? :expense_category_id %>
    <%= collection_select(:expense, :expense_category_id, @categories, :id, :name, prompt: 'Select a category', selected: model.try(:expense_category).try(:id)) %>

    <div class='create-new new-category-btn'>Create Category</div>

    <div class='category-form'>
      <%= f.fields_for @new_category do |category_fields| %>
        <h4>Create New Category</h4>
        <%= category_fields.label :name %>
        <%= category_fields.text_field :name, placeholder: 'Enter a category name' %>
      <% end %>
      <div class='cancel-add'>Cancel</div>
    </div>
  <% end %>

  <% if model.respond_to? :vendor_id %>
    <%= collection_select(:expense, :vendor_id, @vendors, :id, :name, prompt: 'Select a vendor', selected: model.try(:vendor).try(:id)) %>

    <div class='create-new new-vendor-btn'>Create Vendor</div>

    <div class='vendor-form'>
      <%= f.fields_for @new_vendor do |vendor_fields| %>
        <h4>Create New Vendor</h4>
        <%= vendor_fields.label :name %>
        <%= vendor_fields.text_field :name, placeholder: 'Enter vendor name' %>
        <%= vendor_fields.label :note, 'Notes' %>
        <%= vendor_fields.text_area :note, placeholder: 'Enter notes about the vendor' %>
      <% end %>
      <div class='cancel-add'>Cancel</div>
    </div>
  <% end %>

  <%= f.submit %>

  <% if model.id.present? %>
    <br>
    <%= button_to 'Destroy', {action: 'destroy', id: model.id }, method: :delete, data: { confirm: 'Are you sure?'} %>
  <% end %>

<% end %>
